<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="shortcut icon" href="#" />
</head>

<body>
    <script>
        // å­˜å‚¨æ‰€æœ‰å…ƒç´ çš„çŸ©é˜µ
        let result = new Array();
        // å®šä¹‰èƒŒæ™¯å¤§å°
        const bg = {
            width: 5,
            height: 5
        }
        // å®šä¹‰ç”¨æˆ·ä½ç½®
        let userX = 2;
        window.start = function () {
            // æ’­æ”¾éŸ³ä¹
            new Audio("https://img.lookroot.cn/music/5170.wav").play();
            for (let x = 0; x < bg.height; x++) {
                let col = new Array();
                for (let y = 0; y < bg.width; y++) {
                    col[y] = "ğŸš¥";
                }
                result[x] = col;
            }
            //åˆå§‹åŒ–ç”¨æˆ·é£æœºçš„ä½ç½®
            result[result.length - 1][userX] = "ğŸš ";
            // æ–¹ä¾¿ç”¨æˆ·å›åˆ°é¡µé¢ å®šä¹‰å»¶æ—¶æ‰§è¡Œ
            setTimeout(() => {
                let game = setInterval(() => {
                    // å¼¹å‡ºæœ€åä¸€è¡Œ
                    result.pop();
                    // å°†ç”¨æˆ·é£æœºä½ç½®ç§»åŠ¨åˆ°å½“å‰æœ€åä¸€è¡Œ
                    // ç§»åŠ¨ä¹‹å‰å…ˆåˆ¤æ–­æ˜¯å¦ç›¸æ’
                    if (result[result.length - 1][userX] === "ğŸš€" || result[result.length - 1][
                            userX] ===
                        "ğŸ‡") {
                        // å°†æˆ‘ä»¬çš„é£æœºæ›´æ¢ä¸ºçˆ†ç‚¸å›¾æ ‡
                        result[result.length - 1][userX] = "ğŸ‡";
                        // æ’­æ”¾çˆ†ç‚¸éŸ³æ•ˆ
                        new Audio("https://img.lookroot.cn/music/12233.wav").play();
                        // çˆ†ç‚¸å®Œæˆåæ¸…ç©ºæ§åˆ¶å°
                        setTimeout(() => {
                            clearInterval(game);
                            console.clear();
                            console.log('%cOVER', 'color: red;font-size:48px')
                        }, 200);
                    } else {
                        result[result.length - 1][userX] = "ğŸš ";
                    }
                    // æ–°å¢ä¸€è¡Œç©ºç™½çš„
                    result.unshift(new Array(bg.width).fill("ğŸš¥"));
                    // éšæœºå­å¼¹
                    result[0][parseInt(Math.random() * bg.width)] = "ğŸš€";
                    // å®šä¹‰æœ€ç»ˆæ‰“å°çš„å­—ç¬¦ä¸²
                    let str = "";
                    // å¾ªç¯çŸ©é˜µ å­˜å…¥å­—ç¬¦ä¸²
                    for (let row = 0; row < result.length; row++) {
                        let colstr = "";
                        for (let col = 0; col < result[row].length; col++) {
                            colstr += result[row][col];
                        }
                        str += colstr + "\n";
                    }
                    // æ‰“å°ç•Œé¢
                    console.clear();
                    console.log(str)
                }, 200)
            }, 2000)
        }
        // ç”¨æˆ·æ“ä½œ
        window.onkeydown = function (e) {
            // åˆ¤å®šå·¦å³é”®å’ŒèŒƒå›´åˆ¤å®š
            if (e.keyCode === 37 && userX > 0) {
                userX -= 1;
            } else if (e.keyCode === 39 && userX < bg.width - 1) {
                userX += 1;
            }
            // æ’­æ”¾æ“ä½œæç¤ºéŸ³
            new Audio("https://img.lookroot.cn/music/13148.wav").play();
        };
    </script>
</body>

</html>